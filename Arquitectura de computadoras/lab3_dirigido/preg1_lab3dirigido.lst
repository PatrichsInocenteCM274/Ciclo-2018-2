
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\Software_CC212_arquitectura\lab3_dirigido\preg1_lab3dirigido.asm
	Object File:	C:\Software_CC212_arquitectura\lab3_dirigido\preg1_lab3dirigido.hex
	List File:	C:\Software_CC212_arquitectura\lab3_dirigido\preg1_lab3dirigido.lst



 Line  I  Addr  Code            Source

    1:		N      0145	setintvec equ 145h
    2:		N      011E	getbyt	  equ 11Eh
    3:		N      0136	print	  equ 136h
    4:		N      010F	chkbrk    equ 10Fh
    5:		N      8000		org 8000h
    6:	  8000	75 89 20		mov TMOD,#20h	;configuro el Timer 0 en modo 0
    7:	  8003	D2 88			setb IT0; fijamos la interrupcion externa sensible en el flanco de bajada.
    8:	  8005	74 00			mov A,#0
    9:	  8007	90 80 69		mov dptr,#ISR0
   10:	  800A	12 01 45		lcall setintvec
   11:	  800D	D2 A8			setb EX0
   12:	  800F	D2 AF			setb EA
   13:	  8011	D2 B2			setb P3.2
   14:	  8013	C2 B2			clr P3.2
   15:	  8015	D2 B2			setb P3.2; Aca se genera la interrupción
   16:
   17:	  8017	80 FE			sjmp $
   18:				;--------------------SUBRUTINAS
   19:	  8019			f2hz:
   20:	  8019	7F 00			mov R7,#0
   21:	  801B	D2 8C			setb TR0
   22:	  801D			freq2hz:
   23:	  801D	30 8D FD		jnb TF0,freq2hz	;conteo desde 0 hasta 8192
   24:	  8020	0F			inc R7
   25:	  8021	C2 8D			clr TF0
   26:	  8023	BF 1C F7		cjne R7,#28,freq2hz	;
   27:	  8026	7F 00			mov R7,#0
   28:	  8028	B2 90			cpl P1.0
   29:	  802A	C2 8C			clr TR0
   30:	  802C	22			ret
   31:	  802D			f12hz:
   32:	  802D	7F 00			mov R7,#0
   33:	  802F	D2 8C			setb TR0
   34:	  8031			freq12hz:
   35:	  8031	30 8D FD		jnb TF0,freq12hz	;conteo desde 0 hasta 8192
   36:	  8034	0F			inc R7
   37:	  8035	C2 8D			clr TF0
   38:	  8037	BF 05 F7		cjne R7,#5,freq12hz	;
   39:	  803A	7F 00			mov R7,#0
   40:	  803C	B2 90			cpl P1.0
   41:	  803E	C2 8C			clr TR0
   42:	  8040	22			ret
   43:	  8041			f22hz:

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   44:	  8041	7F 00			mov R7,#0
   45:	  8043	D2 8C			setb TR0
   46:	  8045			freq22hz:
   47:	  8045	30 8D FD		jnb TF0,freq22hz	;conteo desde 0 hasta 8192
   48:	  8048	0F			inc R7
   49:	  8049	C2 8D			clr TF0
   50:	  804B	BF 03 F7		cjne R7,#3,freq22hz	;
   51:	  804E	7F 00			mov R7,#0
   52:	  8050	B2 90			cpl P1.0
   53:	  8052	C2 8C			clr TR0
   54:	  8054	22			ret
   55:
   56:	  8055			f32hz:
   57:	  8055	7F 00			mov R7,#0
   58:	  8057	D2 8C			setb TR0
   59:	  8059			freq32hz:
   60:	  8059	30 8D FD		jnb TF0,freq32hz	;conteo desde 0 hasta 8192
   61:	  805C	0F			inc R7
   62:	  805D	C2 8D			clr TF0
   63:	  805F	BF 02 F7		cjne R7,#2,freq32hz	;
   64:	  8062	7F 00			mov R7,#0
   65:	  8064	B2 90			cpl P1.0
   66:	  8066	C2 8C			clr TR0
   67:	  8068	22			ret
   68:	  8069			ISR0:
   69:	  8069	C2 8C			clr TR0
   70:	  806B	12 01 36		lcall print
   71:	  806E	0D 0A 20 4D		db    0dh,0ah," M E N U "
	  8072	20 45 20 4E
	  8076	20 55 20
   72:	  8079	0D 0A 3D 3D		db    0dh,0ah,"=========",0dh,0ah
	  807D	3D 3D 3D 3D
	  8081	3D 3D 3D 0D
	  8085	0A
   73:	  8086	0D 0A 30 31		db    0dh,0ah,"01) FRECUENCIA: 2 HZ"
	  808A	29 20 46 52
	  808E	45 43 55 45
	  8092	4E 43 49 41
	  8096	3A 20 32 20
	  809A	48 5A
   74:	  809C	0D 0A 30 32		db    0dh,0ah,"02) FRECUENCIA: 12 HZ"
	  80A0	29 20 46 52
	  80A4	45 43 55 45
	  80A8	4E 43 49 41
	  80AC	3A 20 31 32
	  80B0	20 48 5A
   75:	  80B3	0D 0A 30 33		db    0dh,0ah,"03) FRECUENCIA: 22 HZ"
	  80B7	29 20 46 52
	  80BB	45 43 55 45
	  80BF	4E 43 49 41
	  80C3	3A 20 32 32
	  80C7	20 48 5A
   76:	  80CA	0D 0A 30 34		db    0dh,0ah,"04) FRECUENCIA: 32 HZ",0dh,0ah
	  80CE	29 20 46 52
	  80D2	45 43 55 45
	  80D6	4E 43 49 41

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

	  80DA	3A 20 33 32
	  80DE	20 48 5A 0D
	  80E2	0A
   77:	  80E3	0D 0A 20 53		db    0dh,0ah," Seleccione una opcion : ",0
	  80E7	65 6C 65 63
	  80EB	63 69 6F 6E
	  80EF	65 20 75 6E
	  80F3	61 20 6F 70
	  80F7	63 69 6F 6E
	  80FB	20 3A 20 00
   78:	  80FF	12 01 1E		lcall getbyt
   79:	  8102	F5 39			mov 39h,A
   80:	  8104	E5 39			mov A,39h
   81:	  8106	B4 01 05		cjne A,#1,salir1
   82:	  8109			repite1:
   83:	  8109	12 80 19		lcall f2hz
   84:	  810C	80 FB			sjmp repite1
   85:	  810E			salir1:
   86:	  810E	B4 02 05		cjne A,#2,salir2
   87:	  8111			repite2:
   88:	  8111	12 80 2D		lcall f12hz
   89:	  8114	80 FB			sjmp repite2
   90:	  8116			salir2:
   91:	  8116	B4 03 05		cjne A,#3,salir3
   92:	  8119			repite3:
   93:	  8119	12 80 41		lcall f22hz
   94:	  811C	80 FB			sjmp repite3
   95:	  811E			salir3:
   96:	  811E	B4 04 0C		cjne A,#4,salir4
   97:	  8121			repite4:
   98:	  8121	12 80 55		lcall f32hz
   99:	  8124	12 01 0F		lcall chkbrk
  100:	  8127	B4 03 01		cjne A,#3,sale
  101:	  812A	32			reti
  102:	  812B			sale:
  103:	  812B	80 F4			sjmp repite4
  104:	  812D			salir4:
  105:	  812D	12 01 36		lcall print
  106:	  8130	0D 0A 53 6F		db 0dh,0ah,"Solamente ingrese las opciones indicadas",0
	  8134	6C 61 6D 65
	  8138	6E 74 65 20
	  813C	69 6E 67 72
	  8140	65 73 65 20
	  8144	6C 61 73 20
	  8148	6F 70 63 69
	  814C	6F 6E 65 73
	  8150	20 69 6E 64
	  8154	69 63 61 64
	  8158	61 73 00
  107:	  815B	02 02 F0		ljmp 2f0h
  108:	  815E	32			reti
  109:					end





ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4




                     register banks used:  ---

                     no errors




ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6
ACC				  DATA	      E0
B				  DATA	      F0
CHKBRK				  NUMBER    010F	   4
CY				  BIT	      D7
DPH				  DATA	      83
DPL				  DATA	      82
EA				  BIT	      AF
ES				  BIT	      AC
ET0				  BIT	      A9
ET1				  BIT	      AB
EX0				  BIT	      A8
EX1				  BIT	      AA
EXTI0				  CODE	    0003
EXTI1				  CODE	    0013
F0				  BIT	      D5
F12HZ				  CODE	    802D	  31
F22HZ				  CODE	    8041	  43
F2HZ				  CODE	    8019	  19
F32HZ				  CODE	    8055	  56
FREQ12HZ			  CODE	    8031	  34
FREQ22HZ			  CODE	    8045	  46
FREQ2HZ				  CODE	    801D	  22
FREQ32HZ			  CODE	    8059	  59
GETBYT				  NUMBER    011E	   2
IE				  DATA	      A8
IE0				  BIT	      89
IE1				  BIT	      8B
INT0				  BIT	      B2
INT1				  BIT	      B3
IP				  DATA	      B8
ISR0				  CODE	    8069	  68
IT0				  BIT	      88
IT1				  BIT	      8A
OV				  BIT	      D2
P				  BIT	      D0
P0				  DATA	      80
P1				  DATA	      90
P2				  DATA	      A0
P3				  DATA	      B0
PCON				  DATA	      87
PRINT				  NUMBER    0136	   3
PS				  BIT	      BC
PSW				  DATA	      D0
PT0				  BIT	      B9
PT1				  BIT	      BB
PX0				  BIT	      B8
PX1				  BIT	      BA

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
RB8				  BIT	      9A
RD				  BIT	      B7
REN				  BIT	      9C
REPITE1				  CODE	    8109	  82
REPITE2				  CODE	    8111	  87
REPITE3				  CODE	    8119	  92
REPITE4				  CODE	    8121	  97
RESET				  CODE	    0000
RI				  BIT	      98
RS0				  BIT	      D3
RS1				  BIT	      D4
RXD				  BIT	      B0
SALE				  CODE	    812B	 102
SALIR1				  CODE	    810E	  85
SALIR2				  CODE	    8116	  90
SALIR3				  CODE	    811E	  95
SALIR4				  CODE	    812D	 104
SBUF				  DATA	      99
SCON				  DATA	      98
SETINTVEC			  NUMBER    0145	   1
SINT				  CODE	    0023
SM0				  BIT	      9F
SM1				  BIT	      9E
SM2				  BIT	      9D
SP				  DATA	      81
T0				  BIT	      B4
T1				  BIT	      B5
TB8				  BIT	      9B
TCON				  DATA	      88
TF0				  BIT	      8D
TF1				  BIT	      8F
TH0				  DATA	      8C
TH1				  DATA	      8D
TI				  BIT	      99
TIMER0				  CODE	    000B
TIMER1				  CODE	    001B
TL0				  DATA	      8A
TL1				  DATA	      8B
TMOD				  DATA	      89
TR0				  BIT	      8C
TR1				  BIT	      8E
TXD				  BIT	      B1
WR				  BIT	      B6
